<div class="mt-2">
  <form #registerForm="ngForm" class="container col-md-4 shadow" (ngSubmit)="register()">
    <h3 class="text-center">Registration</h3>
    <div class="form-group">
      <label>Username<span class="text-danger">*</span></label>
      <input name="username" class="form-control" #username="ngModel" [(ngModel)]="registerModel.Username"
        required />
        @if (username.invalid && (username.dirty || username.touched)) {
          <div class="text-danger error-message">
            @if (username.errors?.['required']) {
              <div>Username is required</div>
            }
          </div>
        }
      </div>
      <div class="form-group">
        <label>Email<span class="text-danger">*</span></label>
        <input type="email" name="email" class="form-control" #email="ngModel" [(ngModel)]="registerModel.Email"
          email required />
          @if (email.invalid && (email.dirty || email.touched)) {
            <div class="text-danger error-message">
              @if (email.errors?.['required']) {
                <div>Email is required</div>
              }
              @if (email.errors?.['email']) {
                <div>Email is invalid</div>
              }
            </div>
          }
        </div>
        <div class="form-group">
          <label>Password<span class="text-danger">*</span></label>
          <input type="password" name="password" class="form-control" #password="ngModel"
            [(ngModel)]="registerModel.Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{8,}" required />
            @if (password.invalid && (password.dirty || password.touched)) {
              <div class="text-danger error-message">
                @if (password.errors?.['required']) {
                  <div>password is required</div>
                }
                @if (password.errors?.['pattern']) {
                  <div>Password must contain at least one number, one uppercase
                    letter,
                  one lowercase letter, one special character, and be at least 8 characters long.</div>
                }
              </div>
            }
          </div>
          <div class="form-group">
            <label>Confirm Password<span class="text-danger">*</span></label>
            <input type="password" name="confirmPassword" class="form-control" #confirmPassword="ngModel"
              [(ngModel)]="ConfirmPassword" (change)="onTouched()" required />
              @if (confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched )) {
                <div
                  class="text-danger error-message">
                  @if (confirmPassword.errors?.['required']) {
                    <div>confirmPassword is required</div>
                  }
                </div>
              }
              @if (checkPass()) {
                <div class="text-danger">confirmPassword is invalid</div>
              }

            </div>
            <div class="form-group">
              <label>Mobile Number<span class="text-danger">*</span></label>
              <input name="mobileNumber" class="form-control" #mobileNumber="ngModel"
                [(ngModel)]="registerModel.MobileNumber" required />
                @if (mobileNumber.invalid && (mobileNumber.dirty || mobileNumber.touched)) {
                  <div
                    class="text-danger error-message">
                    @if (confirmPassword.errors?.['required']) {
                      <div>mobileNumber is required</div>
                    }
                  </div>
                }
              </div>
              <div class="form-group">
                <label>Role<span class="text-danger">*</span></label>
                <select name="role" class="form-control" #role="ngModel" [(ngModel)]="registerModel.UserRole" required>
                  <option value="">Select a role</option>
                  <option value="Owner">Owner</option>
                  <option value="Supplier">Supplier</option>
                </select>
                @if (role.invalid && (role.dirty || role.touched)) {
                  <div class="text-danger error-message">
                    @if (role.errors?.['required']) {
                      <div>role is required</div>
                    }
                  </div>
                }
              </div>
              <div class="form-group py-3">
                <button type="submit" class="btn btn-success form-control" [disabled]="!isFormValid()">Register</button>
              </div>
              @if (error!=null) {
                <div class="text-center text-danger">{{error}}</div>
              }
              <div class="form-group p-2">
                <p class="text-center">
                  Already have an account?
                  <a class="text-decoration-none" routerLink="/login">Login Now</a>
                </p>
              </div>
            </form>
          </div>