<div class="container">

  <h1 class="text-center">Available Medicines</h1>

  <div *ngIf="medicines == null" class="text-danger text-center">
    No Medicines Found
  </div>

  <div *ngIf="medicines && medicines.length > 0">
    <div class="search-bar">
      <input type="text" placeholder="Search..." [(ngModel)]="searchQuery" (input)="filterMedicines()" />
    </div>
    <br />
    <table class="table table-striped table-bordered">
      <thead>
        <tr class="text-center">
          <th class="bg-primary">S.No</th>
          <th class="bg-primary">Medicine Name</th>
          <th class="bg-primary">Brand</th>
          <th class="bg-primary">Category</th>
          <th class="bg-primary">Description</th>
          <th class="bg-primary">Quantity</th>
          <th class="bg-primary">Unit</th>
          <th class="bg-primary">Price Per Unit</th>
          <th class="bg-primary">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let m of medicines; let i = index" class="text-center">
          <td>{{ i + 1 }}</td>
          <td>{{ m.MedicineName }}</td>
          <td>{{ m.Brand }}</td>
          <td>{{ m.Category }}</td>
          <td>{{ m.Description }}</td>
          <td>{{ m.Quantity }}</td>
          <td>{{ m.Unit }}</td>
          <td>{{ m.PricePerUnit | number }}</td>
          <td>
            <button class="btn btn-success" [routerLink]="['/requestform', 'Medicine', m.MedicineId]">
              Request
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>

<!-- Delete Modal -->
<div id="deleteModal" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeDeleteModal()">&times;</span>
    <h2>Confirm Delete</h2>
    <p>Are you sure you want to delete "{{ medicineToDelete.MedicineName }}"?</p>
    <button class="btn btn-danger" data-bs-dismiss="modal" (click)="confirmDelete()">Yes, Delete</button>
    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  </div>
</div>
